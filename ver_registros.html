<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ver registros</title>

    <style>
        body { margin:0; padding:20px; font-family:Arial,sans-serif; background:#cfe9ff; color:#003060; }
        h1 { margin:0; font-size:26px; text-align:left; color:#002244; }
        .back-btn { display:inline-block; padding:10px 14px; background:#fff; color:#003060; text-decoration:none; border-radius:8px; box-shadow:0 3px 0 #8bb7e0; font-size:16px; margin-bottom:20px; }
        .back-btn:active { transform:translateY(2px); box-shadow:0 1px 0 #8bb7e0; }

        /* CONTENEDOR GENERAL */
        .cards-container {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        /* TARJETAS */
        .card {
            background:white;
            padding:15px;
            border-radius:12px;
            box-shadow:0 4px 8px rgba(0,0,0,0.15);
            text-align:left;
        }

        .card h3 {
            margin:0 0 10px 0;
            font-size:20px;
            color:#002244;
        }

        .linea {
            font-size:14px;
            margin-bottom:6px;
        }

        .btn-ver {
            margin-top:10px;
            display:inline-block;
            padding:6px 10px;
            background:#0077aa;
            color:white;
            border-radius:6px;
            text-decoration:none;
            font-size:14px;
            box-shadow:0 3px 0 #005b80;
        }

        .btn-ver:active {
            transform:translateY(2px);
            box-shadow:0 1px 0 #005b80;
        }

    </style>
</head>
<body>

<a href="index.html" class="back-btn">⬅ Volver al inicio</a>
<h1>Ver registros</h1>

<div class="cards-container" id="contenedor"></div>

<!-- FIREBASE -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, getDocs }
        from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyDpBHhVkMFE7LkwTzcjRj4KppASOO6I1bY",
        authDomain: "registros-publicadores.firebaseapp.com",
        projectId: "registros-publicadores",
        storageBucket: "registros-publicadores.firebasestorage.app",
        messagingSenderId: "51876330886",
        appId: "1:51876330886:web:bb478e92a55a01fa138007"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const contenedor = document.getElementById("contenedor");

    async function cargarPublicadores() {
        const snap = await getDocs(collection(db, "publicadores"));

        snap.forEach(doc => {
            const p = doc.data();

            const tarjeta = document.createElement("div");
            tarjeta.className = "card";

            tarjeta.innerHTML = `
                <h3>${p.nombre}</h3>

                <div class="linea"><b>Sexo:</b> ${p.sexo || "-"}</div>
                <div class="linea"><b>Nacimiento:</b> ${p.fechaNacimiento || "-"}</div>
                <div class="linea"><b>Bautismo:</b> ${p.fechaBautismo || "-"}</div>
                <div class="linea"><b>Grupo:</b> ${p.grupo || "-"}</div>

                <div class="linea"><b>Designaciones:</b> 
                    ${p.anciano ? "Anciano · " : ""}
                    ${p.siervoMinisterial ? "SM · " : ""}
                    ${p.precursorRegular ? "PR · " : ""}
                    ${p.precursorEspecial ? "PE · " : ""}
                    ${p.misioneroCampo ? "MC" : ""}
                </div>

                <a class="btn-ver" href="#">Ver informes</a>
            `;

            contenedor.appendChild(tarjeta);
        });
    }

    cargarPublicadores();
</script>

</body>
</html>
